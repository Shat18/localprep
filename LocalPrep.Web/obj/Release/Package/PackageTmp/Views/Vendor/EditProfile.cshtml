@model LocalPrep.Web.Models.ResponseProfile

@{ 
          Layout = "~/Views/Shared/_AdminLayout.cshtml"; }


@*@if (Model.response.user.account.role != "CUSTOMER")
    {

    }
    else
    {
        {
            ViewBag.Title = Model.response.user.first_name  ;
            Layout = "~/Views/Shared/_AdminLayout.cshtml";
        }
    }*@

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
<link rel="stylesheet" href="css/style.css" />

@if (ViewBag.SuccessMessage != null && ViewBag.SuccessMessage.Length > 0)
{
<div class="alert alert-success">@ViewBag.SuccessMessage</div>}

@if (ViewBag.FailureMessage != null && ViewBag.FailureMessage.Length > 0)
{
<div class="alert alert-danger">@ViewBag.FailureMessage</div>}

<section id="page-content" class="pt-0">


    <div class="col-lg-12 mb-5">
        @if(Model.response!=null)
        {
 if (Model.response.user.account.role != "CUSTOMER")
        {
<div class="shadow p-5 rounded-bottom ">

    <div class="container">
        <div class="row">
            <div class="col-md-12">


                @using (Html.BeginForm("EditProfile", "Vendor", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "frmSignUp" }))
                {
<div class="loader-container" style="display:none">
    <div class="loader"></div>
</div>
                    @Html.AntiForgeryToken()

                                        @Html.ValidationSummary("", new { @class = "text-danger" })



                                                            <div class="form-group row">
                                                                <div class="col-md-6">
                                                                    @Html.LabelFor(m => m.response.user.business.vendor_name, new { @class = "control-label" })
                                                                    <div class="mb-4">
                                                                        @Html.TextBoxFor(m => m.response.user.business.vendor_name, new { @class = "form-control" })
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    @Html.LabelFor(m => m.response.user.business.company_name, new { @class = "control-label" })
                                                                    <div class="mb-4">
                                                                        @Html.TextBoxFor(m => m.response.user.business.company_name, new { @class = "form-control" })
                                                                    </div>
                                                                </div>

                                                            </div>

                                                                                <div class="form-group row">
                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].address_line_1, new { @class = "col-md-12 control-label" })
                                                                                    <div class="col-md-12 mb-4">
                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].address_line_1, new { @class = "form-control" })
                                                                                    </div>
                                                                                </div>

                                                                                                    <div class="form-group mfp-arrow-right row">
                                                                                                        @Html.LabelFor(m => m.response.user.addresses[0].address_line_2, new { @class = "col-md-12 control-label" })
                                                                                                        <div class="col-md-12 mb-4">
                                                                                                            @Html.TextBoxFor(m => m.response.user.addresses[0].address_line_2, new { @class = "form-control" })
                                                                                                        </div>
                                                                                                    </div>

                                                                                                                        <div class="form-group row">
                                                                                                                            <div class="col-md-6">
                                                                                                                                @Html.LabelFor(m => m.response.user.addresses[0].city, new { @class = "control-label" })
                                                                                                                                <div class="mb-4">
                                                                                                                                    @Html.TextBoxFor(m => m.response.user.addresses[0].city, new { @class = "form-control" })
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div class="col-md-6">
                                                                                                                                <div class="form-group">
                                                                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].zip_code, new { @class = "control-label" })
                                                                                                                                    <div class="mb-4">
                                                                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].zip_code, new { @class = "form-control" })
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>

                                                                                                                        </div>



                                                                                                                                            <div class="form-group row">
                                                                                                                                                <div class="col-md-6">
                                                                                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].phone, new { @class = "control-label" })
                                                                                                                                                    <div class="mb-4">
                                                                                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].phone, new { @class = "form-control" })
                                                                                                                                                    </div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-md-6">
                                                                                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].email, new { @class = "control-label" })
                                                                                                                                                    <div class="mb-4">
                                                                                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].email, new { @class = "form-control" })
                                                                                                                                                    </div>
                                                                                                                                                </div>

                                                                                                                                            </div>





                                                                                                                                                                <div class="form-group">
                                                                                                                                                                    <div class="custom-file">
                                                                                                                                                                        @Html.LabelFor(m => m.response.user.account.photo, new { @class = "custom-file-label" })
                                                                                                                                                                        @Html.TextBoxFor(m => m.response.user.account.photo, new { @class = "form-control-file custom-file-input", @id = "fldupload", @type = "file" })
                                                                                                                                                                    </div>
                                                                                                                                                                    @*@Html.HiddenFor(x => m.response.user.account.photo, new { @id = "hdnfilepath" })*@

                                                                                                                                                                    @if (Model.response.user.account.photo == null)
                                                                                                                                                                    {
                                                                                                                                                <div class="">
                                                                                                                                                    <img src="~/img/empty-profile-image.jpg" class="img-fluid" style="max-width: 200px;" alt="@Model.response.user.business.vendor_name" />
                                                                                                                                                </div> }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                        <div class="">


                                                                                                                            <img src="@Url.Content(@Model.response.user.account.photo)" class="img-fluid" />
                                                                                                                            @*<p class="text-center">
                                                                                                                                    <button class="btn btn-sm btn-danger" value="Remove">Remove</button>
                                                                                                                                </p>*@
                                                                                                                        </div>}
                                                                                                                                                                </div>


                                                                                                                                                                                    <div class="form-group">
                                                                                                                                                                                        <div class="">
                                                                                                                                                                                            <input type="submit" class="btn btn-lp" value="Edit Profile" id="btnsignup" />
                                                                                                                                                                                        </div>
                                                                                                                                                                                    </div>}

            </div>
        </div>
    </div>
</div> }
            else
            {
<div class="shadow p-5 rounded-bottom ">

    <div class="container">
        <div class="row">
            <div class="col-md-12">


                @using (Html.BeginForm("EditProfile", "Vendor", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "frmSignUp" }))
                {
<div class="loader-container" style="display:none">
    <div class="loader"></div>
</div>
                    @Html.AntiForgeryToken()

                                        @Html.ValidationSummary("", new { @class = "text-danger" })



                                                            <div class="form-group row">
                                                                <div class="col-md-6">
                                                                    @Html.LabelFor(m => m.response.user.first_name, new { @class = "control-label" })
                                                                    <div class="mb-4">
                                                                        @Html.TextBoxFor(m => m.response.user.first_name, new { @class = "form-control" })
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    @Html.LabelFor(m => m.response.user.last_name, new { @class = "control-label" })
                                                                    <div class="mb-4">
                                                                        @Html.TextBoxFor(m => m.response.user.last_name, new { @class = "form-control" })
                                                                    </div>
                                                                </div>

                                                            </div>

                                                                                <div class="form-group row">
                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].address_line_1, new { @class = "col-md-12 control-label" })
                                                                                    <div class="col-md-12 mb-4">
                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].address_line_1, new { @class = "form-control" })
                                                                                    </div>
                                                                                </div>

                                                                                                    <div class="form-group mfp-arrow-right row">
                                                                                                        @Html.LabelFor(m => m.response.user.addresses[0].address_line_2, new { @class = "col-md-12 control-label" })
                                                                                                        <div class="col-md-12 mb-4">
                                                                                                            @Html.TextBoxFor(m => m.response.user.addresses[0].address_line_2, new { @class = "form-control" })
                                                                                                        </div>
                                                                                                    </div>

                                                                                                                        <div class="form-group row">
                                                                                                                            <div class="col-md-6">
                                                                                                                                @Html.LabelFor(m => m.response.user.addresses[0].city, new { @class = "control-label" })
                                                                                                                                <div class="mb-4">
                                                                                                                                    @Html.TextBoxFor(m => m.response.user.addresses[0].city, new { @class = "form-control" })
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div class="col-md-6">
                                                                                                                                <div class="form-group">
                                                                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].zip_code, new { @class = "control-label" })
                                                                                                                                    <div class="mb-4">
                                                                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].zip_code, new { @class = "form-control" })
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>

                                                                                                                        </div>



                                                                                                                                            <div class="form-group row">
                                                                                                                                                <div class="col-md-6">
                                                                                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].phone, new { @class = "control-label" })
                                                                                                                                                    <div class="mb-4">
                                                                                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].phone, new { @class = "form-control" })
                                                                                                                                                    </div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-md-6">
                                                                                                                                                    @Html.LabelFor(m => m.response.user.addresses[0].email, new { @class = "control-label" })
                                                                                                                                                    <div class="mb-4">
                                                                                                                                                        @Html.TextBoxFor(m => m.response.user.addresses[0].email, new { @class = "form-control" })
                                                                                                                                                    </div>
                                                                                                                                                </div>

                                                                                                                                            </div> @*<div class="form-group">
                                                                                                                                                                        <div class="form-group custom-file">
                                                                                                                                                                            @Html.LabelFor(m => m.ImageFile, new { @class = "custom-file-label" })
                                                                                                                                                                            @Html.TextBoxFor(m => m.ImageFile, new { @class = "form-control-file custom-file-input", @id = "imgInp", @type = "file" })
                                                                                                                                                                            @Html.HiddenFor(x => x.filepath, new { @id = "hdnfilepath" })
                                                                                                                                                                        </div>
                                                                                                                                                                        <div class="">
                                                                                                                                                                            <img id="blah" src="#" alt="" class="img-fluid" style="max-width: 200px;"  />
                                                                                                                                                                        </div>


                                                                                                                                                                    </div>*@

                                                                                                                                                                <div class="form-group">
                                                                                                                                                                    <div class="custom-file">
                                                                                                                                                                        @Html.LabelFor(m => m.response.user.account.photo, new { @class = "custom-file-label" })
                                                                                                                                                                        @Html.TextBoxFor(m => m.response.user.account.photo, new { @class = "form-control-file custom-file-input", @id = "fldupload1", @type = "file" })
                                                                                                                                                                        @Html.HiddenFor(m => m.response.user.account.photopath, new { @id = "hdnfilepath" })
                                                                                                                                                                    </div>
                                                                                                                                                                    <div class="">
                                                                                                                                                                        <img id="blah" src="#" alt="" class="img-fluid" style="max-width: 200px;" />
                                                                                                                                                                    </div>
                                                                                                                                                                    @if (Model.response.user.account.photo == null)
                                                                                                                                                                    {
                                                                                                                                                <div class="">
                                                                                                                                                    <img src="~/img/empty-profile-image.jpg" class="img-fluid" style="max-width: 200px;" alt="@Model.response.user.business.vendor_name" />
                                                                                                                                                </div> }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                <div class="">
                                                                                                                                                    <img src="@Url.Content(@Model.response.user.account.photo)" class="img-fluid" style="max-width: 200px;" />
                                                                                                                                                </div>}
                                                                                                                                                                </div>


                                                                                                                                                                                    <div class="form-group">
                                                                                                                                                                                        <div class="">
                                                                                                                                                                                            <input type="submit" class="btn btn-lp" value="Edit Profile" id="btnsignup" />
                                                                                                                                                                                        </div>
                                                                                                                                                                                    </div>}

            </div>
        </div>
    </div>
</div>
        }
        }
       





    </div>



</section>
<script src="https://cdn.jsdelivr.net/npm/bs-custom-file-input/dist/bs-custom-file-input.min.js"></script>
@section Scripts {

    <script src="js/app.js"></script>

    <script>
        $('#fldupload1').on('change', function () {
            const [file] = imgInp.files
            if (file) {
                blah.src = URL.createObjectURL(file)
            }
        });

        $(document).ready(function () {
            bsCustomFileInput.init()
        })









    </script>


}

